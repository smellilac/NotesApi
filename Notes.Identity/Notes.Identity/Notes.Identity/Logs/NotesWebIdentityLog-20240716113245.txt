2024-07-16 11:32:47.199 +03:00 [INF] Executed DbCommand (262ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE DATABASE "IdentityApiNotes";
2024-07-16 11:32:47.400 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Roles" (
    "Id" text NOT NULL,
    "Name" character varying(256),
    "NormalizedName" character varying(256),
    "ConcurrencyStamp" text,
    CONSTRAINT "PK_Roles" PRIMARY KEY ("Id")
);
2024-07-16 11:32:47.407 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Users" (
    "Id" text NOT NULL,
    "FirstName" text,
    "LastName" text,
    "UserName" character varying(256),
    "NormalizedUserName" character varying(256),
    "Email" character varying(256),
    "NormalizedEmail" character varying(256),
    "EmailConfirmed" boolean NOT NULL,
    "PasswordHash" text,
    "SecurityStamp" text,
    "ConcurrencyStamp" text,
    "PhoneNumber" text,
    "PhoneNumberConfirmed" boolean NOT NULL,
    "TwoFactorEnabled" boolean NOT NULL,
    "LockoutEnd" timestamp with time zone,
    "LockoutEnabled" boolean NOT NULL,
    "AccessFailedCount" integer NOT NULL,
    CONSTRAINT "PK_Users" PRIMARY KEY ("Id")
);
2024-07-16 11:32:47.416 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "RoleClaims" (
    "Id" integer GENERATED BY DEFAULT AS IDENTITY,
    "RoleId" text NOT NULL,
    "ClaimType" text,
    "ClaimValue" text,
    CONSTRAINT "PK_RoleClaims" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_RoleClaims_Roles_RoleId" FOREIGN KEY ("RoleId") REFERENCES "Roles" ("Id") ON DELETE CASCADE
);
2024-07-16 11:32:47.423 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "UserClaim" (
    "Id" integer GENERATED BY DEFAULT AS IDENTITY,
    "UserId" text NOT NULL,
    "ClaimType" text,
    "ClaimValue" text,
    CONSTRAINT "PK_UserClaim" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_UserClaim_Users_UserId" FOREIGN KEY ("UserId") REFERENCES "Users" ("Id") ON DELETE CASCADE
);
2024-07-16 11:32:47.429 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "UserLogins" (
    "LoginProvider" text NOT NULL,
    "ProviderKey" text NOT NULL,
    "ProviderDisplayName" text,
    "UserId" text NOT NULL,
    CONSTRAINT "PK_UserLogins" PRIMARY KEY ("LoginProvider", "ProviderKey"),
    CONSTRAINT "FK_UserLogins_Users_UserId" FOREIGN KEY ("UserId") REFERENCES "Users" ("Id") ON DELETE CASCADE
);
2024-07-16 11:32:47.436 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "UserRoles" (
    "UserId" text NOT NULL,
    "RoleId" text NOT NULL,
    CONSTRAINT "PK_UserRoles" PRIMARY KEY ("UserId", "RoleId"),
    CONSTRAINT "FK_UserRoles_Roles_RoleId" FOREIGN KEY ("RoleId") REFERENCES "Roles" ("Id") ON DELETE CASCADE,
    CONSTRAINT "FK_UserRoles_Users_UserId" FOREIGN KEY ("UserId") REFERENCES "Users" ("Id") ON DELETE CASCADE
);
2024-07-16 11:32:47.442 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "UserTokens" (
    "UserId" text NOT NULL,
    "LoginProvider" text NOT NULL,
    "Name" text NOT NULL,
    "Value" text,
    CONSTRAINT "PK_UserTokens" PRIMARY KEY ("UserId", "LoginProvider", "Name"),
    CONSTRAINT "FK_UserTokens_Users_UserId" FOREIGN KEY ("UserId") REFERENCES "Users" ("Id") ON DELETE CASCADE
);
2024-07-16 11:32:47.444 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_RoleClaims_RoleId" ON "RoleClaims" ("RoleId");
2024-07-16 11:32:47.446 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX "RoleNameIndex" ON "Roles" ("NormalizedName");
2024-07-16 11:32:47.449 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_UserClaim_UserId" ON "UserClaim" ("UserId");
2024-07-16 11:32:47.452 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_UserLogins_UserId" ON "UserLogins" ("UserId");
2024-07-16 11:32:47.454 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_UserRoles_RoleId" ON "UserRoles" ("RoleId");
2024-07-16 11:32:47.457 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "EmailIndex" ON "Users" ("NormalizedEmail");
2024-07-16 11:32:47.459 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX "UserNameIndex" ON "Users" ("NormalizedUserName");
2024-07-16 11:32:47.473 +03:00 [INF] Starting Duende IdentityServer version 7.0.5+11906052da057e72f04ee755c1f4953b6cb93ac3 (.NET 8.0.0-rc.2.23479.6)
2024-07-16 11:32:47.485 +03:00 [WRN] You do not have a valid license key for the Duende software. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please start a conversation with us: https://duendesoftware.com/contact
2024-07-16 11:32:47.485 +03:00 [WRN] You have automatic key management enabled, but you do not have a license. This feature requires the Business or Enterprise Edition tier of license. Alternatively you can disable automatic key management by setting the KeyManagement.Enabled property to false on the IdentityServerOptions.
2024-07-16 11:32:47.488 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2024-07-16 11:32:47.490 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2024-07-16 11:32:47.608 +03:00 [INF] User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-07-16 11:32:47.712 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-07-16 11:32:47.712 +03:00 [INF] Hosting environment: Development
2024-07-16 11:32:47.712 +03:00 [INF] Content root path: C:\Users\User\source\repos\NotesAPI\Notes.Identity\Notes.Identity\Notes.Identity
2024-07-16 11:32:47.751 +03:00 [INF] Request starting HTTP/2 GET https://localhost:44325/ - null null
2024-07-16 11:32:47.969 +03:00 [INF] Request finished HTTP/2 GET https://localhost:44325/ - 404 null null 225.3092ms
2024-07-16 11:32:47.973 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:44325/, Response status code: 404
2024-07-16 11:33:10.938 +03:00 [INF] Request starting HTTP/2 GET https://localhost:44325/.well-known/openid-configuration - null null
2024-07-16 11:33:10.962 +03:00 [INF] CORS policy execution successful.
2024-07-16 11:33:11.002 +03:00 [INF] Invoking IdentityServer endpoint: Duende.IdentityServer.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2024-07-16 11:33:11.287 +03:00 [INF] Request finished HTTP/2 GET https://localhost:44325/.well-known/openid-configuration - 200 null application/json; charset=UTF-8 349.8319ms
2024-07-16 11:33:11.317 +03:00 [INF] Request starting HTTP/2 GET https://localhost:44325/connect/authorize?client_id=notes-web-app&redirect_uri=http%3A%2F%2Flocalhost%3A3000%2Fsignin-oidc&response_type=code&scope=openid+profile+NotesWebAPI&state=ca3336c210d447539cfcfbb27103b8fe&code_challenge=F1vCZSJdBJtOKUGOGvcIBvYvb81B8op-WGrUMwBGfMo&code_challenge_method=S256 - null null
2024-07-16 11:33:11.344 +03:00 [INF] Invoking IdentityServer endpoint: Duende.IdentityServer.Endpoints.AuthorizeEndpoint for /connect/authorize
2024-07-16 11:33:12.054 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__p_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AccessFailedCount", u."ConcurrencyStamp", u."Email", u."EmailConfirmed", u."FirstName", u."LastName", u."LockoutEnabled", u."LockoutEnd", u."NormalizedEmail", u."NormalizedUserName", u."PasswordHash", u."PhoneNumber", u."PhoneNumberConfirmed", u."SecurityStamp", u."TwoFactorEnabled", u."UserName"
FROM "Users" AS u
WHERE u."Id" = @__p_0
LIMIT 1
2024-07-16 11:33:12.076 +03:00 [WRN] No user found matching subject Id: 2c9a6f3f-0128-4c62-8c6b-491c0d2be56b
2024-07-16 11:33:12.078 +03:00 [INF] Showing login: User is not active
2024-07-16 11:33:12.094 +03:00 [INF] Request finished HTTP/2 GET https://localhost:44325/connect/authorize?client_id=notes-web-app&redirect_uri=http%3A%2F%2Flocalhost%3A3000%2Fsignin-oidc&response_type=code&scope=openid+profile+NotesWebAPI&state=ca3336c210d447539cfcfbb27103b8fe&code_challenge=F1vCZSJdBJtOKUGOGvcIBvYvb81B8op-WGrUMwBGfMo&code_challenge_method=S256 - 302 null null 776.5363ms
2024-07-16 11:33:12.100 +03:00 [INF] Request starting HTTP/2 GET https://localhost:44325/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3Dnotes-web-app%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A3000%252Fsignin-oidc%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520NotesWebAPI%26state%3Dca3336c210d447539cfcfbb27103b8fe%26code_challenge%3DF1vCZSJdBJtOKUGOGvcIBvYvb81B8op-WGrUMwBGfMo%26code_challenge_method%3DS256 - null null
2024-07-16 11:33:12.130 +03:00 [INF] Executing endpoint 'Notes.Identity.Controllers.AuthController.Login (Notes.Identity)'
2024-07-16 11:33:12.163 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller Notes.Identity.Controllers.AuthController (Notes.Identity).
2024-07-16 11:33:12.204 +03:00 [INF] Executing ViewResult, running view Login.
2024-07-16 11:33:12.333 +03:00 [INF] Executed ViewResult - view Login executed in 132.1443ms.
2024-07-16 11:33:12.335 +03:00 [INF] Executed action Notes.Identity.Controllers.AuthController.Login (Notes.Identity) in 170.6086ms
2024-07-16 11:33:12.335 +03:00 [INF] Executed endpoint 'Notes.Identity.Controllers.AuthController.Login (Notes.Identity)'
2024-07-16 11:33:12.336 +03:00 [WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page.
2024-07-16 11:33:12.338 +03:00 [INF] Request finished HTTP/2 GET https://localhost:44325/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3Dnotes-web-app%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A3000%252Fsignin-oidc%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520NotesWebAPI%26state%3Dca3336c210d447539cfcfbb27103b8fe%26code_challenge%3DF1vCZSJdBJtOKUGOGvcIBvYvb81B8op-WGrUMwBGfMo%26code_challenge_method%3DS256 - 200 null text/html; charset=utf-8 238.8301ms
2024-07-16 11:33:14.482 +03:00 [INF] Request starting HTTP/2 GET https://localhost:44325/Auth/Register?returnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3Dnotes-web-app%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A3000%252Fsignin-oidc%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520NotesWebAPI%26state%3Dca3336c210d447539cfcfbb27103b8fe%26code_challenge%3DF1vCZSJdBJtOKUGOGvcIBvYvb81B8op-WGrUMwBGfMo%26code_challenge_method%3DS256 - null null
2024-07-16 11:33:14.488 +03:00 [INF] Executing endpoint 'Notes.Identity.Controllers.AuthController.Register (Notes.Identity)'
2024-07-16 11:33:14.492 +03:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Register(System.String) on controller Notes.Identity.Controllers.AuthController (Notes.Identity).
2024-07-16 11:33:14.497 +03:00 [INF] Executing ViewResult, running view Register.
2024-07-16 11:33:14.527 +03:00 [INF] Executed ViewResult - view Register executed in 31.0909ms.
2024-07-16 11:33:14.528 +03:00 [INF] Executed action Notes.Identity.Controllers.AuthController.Register (Notes.Identity) in 35.1814ms
2024-07-16 11:33:14.528 +03:00 [INF] Executed endpoint 'Notes.Identity.Controllers.AuthController.Register (Notes.Identity)'
2024-07-16 11:33:14.528 +03:00 [INF] Request finished HTTP/2 GET https://localhost:44325/Auth/Register?returnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3Dnotes-web-app%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A3000%252Fsignin-oidc%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520NotesWebAPI%26state%3Dca3336c210d447539cfcfbb27103b8fe%26code_challenge%3DF1vCZSJdBJtOKUGOGvcIBvYvb81B8op-WGrUMwBGfMo%26code_challenge_method%3DS256 - 200 null text/html; charset=utf-8 46.0724ms
2024-07-16 11:33:14.563 +03:00 [INF] Request starting HTTP/2 GET https://localhost:44325/_vs/browserLink - null null
2024-07-16 11:33:14.563 +03:00 [INF] Request starting HTTP/2 GET https://localhost:44325/_framework/aspnetcore-browser-refresh.js - null null
2024-07-16 11:33:14.569 +03:00 [INF] Request finished HTTP/2 GET https://localhost:44325/_framework/aspnetcore-browser-refresh.js - 200 13764 application/javascript; charset=utf-8 3.9323ms
2024-07-16 11:33:14.617 +03:00 [INF] Request finished HTTP/2 GET https://localhost:44325/_vs/browserLink - 200 null text/javascript; charset=UTF-8 57.8035ms
2024-07-16 11:33:21.219 +03:00 [INF] Request starting HTTP/2 POST https://localhost:44325/Auth/Register - application/x-www-form-urlencoded 622
2024-07-16 11:33:21.224 +03:00 [INF] No CORS policy found for the specified request.
2024-07-16 11:33:21.225 +03:00 [INF] Executing endpoint 'Notes.Identity.Controllers.AuthController.Register (Notes.Identity)'
2024-07-16 11:33:21.236 +03:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(Notes.Identity.Models.RegisterViewModel) on controller Notes.Identity.Controllers.AuthController (Notes.Identity).
2024-07-16 11:33:21.267 +03:00 [FTL] FirstName is set to 
2024-07-16 11:33:21.269 +03:00 [FTL] LastName is not set.
2024-07-16 11:33:21.270 +03:00 [FTL] Id is set to 6f782e78-541d-4f45-8218-6c36fa4fa758
2024-07-16 11:33:21.270 +03:00 [FTL] UserName is set to Dima
2024-07-16 11:33:21.270 +03:00 [FTL] NormalizedUserName is not set.
2024-07-16 11:33:21.270 +03:00 [FTL] Email is not set.
2024-07-16 11:33:21.270 +03:00 [FTL] NormalizedEmail is not set.
2024-07-16 11:33:21.270 +03:00 [FTL] EmailConfirmed is set to False
2024-07-16 11:33:21.270 +03:00 [FTL] PasswordHash is not set.
2024-07-16 11:33:21.270 +03:00 [FTL] SecurityStamp is set to 550e3700-ce55-4029-88fb-6dbfa599ccf4
2024-07-16 11:33:21.271 +03:00 [FTL] ConcurrencyStamp is set to 7ecefa2d-b0f5-46e8-941f-e86ef09eef8e
2024-07-16 11:33:21.271 +03:00 [FTL] PhoneNumber is not set.
2024-07-16 11:33:21.271 +03:00 [FTL] PhoneNumberConfirmed is set to False
2024-07-16 11:33:21.271 +03:00 [FTL] TwoFactorEnabled is set to False
2024-07-16 11:33:21.271 +03:00 [FTL] LockoutEnd is not set.
2024-07-16 11:33:21.271 +03:00 [FTL] LockoutEnabled is set to False
2024-07-16 11:33:21.271 +03:00 [FTL] AccessFailedCount is set to 0
2024-07-16 11:33:21.534 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedUserName_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AccessFailedCount", u."ConcurrencyStamp", u."Email", u."EmailConfirmed", u."FirstName", u."LastName", u."LockoutEnabled", u."LockoutEnd", u."NormalizedEmail", u."NormalizedUserName", u."PasswordHash", u."PhoneNumber", u."PhoneNumberConfirmed", u."SecurityStamp", u."TwoFactorEnabled", u."UserName"
FROM "Users" AS u
WHERE u."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2024-07-16 11:33:21.813 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[@p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?', @p4='?' (DbType = Boolean), @p5='?', @p6='?', @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTime), @p9='?', @p10='?', @p11='?', @p12='?', @p13='?' (DbType = Boolean), @p14='?', @p15='?' (DbType = Boolean), @p16='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Users" ("Id", "AccessFailedCount", "ConcurrencyStamp", "Email", "EmailConfirmed", "FirstName", "LastName", "LockoutEnabled", "LockoutEnd", "NormalizedEmail", "NormalizedUserName", "PasswordHash", "PhoneNumber", "PhoneNumberConfirmed", "SecurityStamp", "TwoFactorEnabled", "UserName")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
2024-07-16 11:33:21.918 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."ClaimType", u."ClaimValue", u."UserId"
FROM "UserClaim" AS u
WHERE u."UserId" = @__user_Id_0
2024-07-16 11:33:21.960 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r."Name"
FROM "UserRoles" AS u
INNER JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."UserId" = @__userId_0
2024-07-16 11:33:21.988 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2024-07-16 11:33:21.992 +03:00 [INF] Executing RedirectResult, redirecting to /connect/authorize/callback?client_id=notes-web-app&redirect_uri=http%3A%2F%2Flocalhost%3A3000%2Fsignin-oidc&response_type=code&scope=openid%20profile%20NotesWebAPI&state=ca3336c210d447539cfcfbb27103b8fe&code_challenge=F1vCZSJdBJtOKUGOGvcIBvYvb81B8op-WGrUMwBGfMo&code_challenge_method=S256.
2024-07-16 11:33:21.993 +03:00 [INF] Executed action Notes.Identity.Controllers.AuthController.Register (Notes.Identity) in 756.7963ms
2024-07-16 11:33:21.994 +03:00 [INF] Executed endpoint 'Notes.Identity.Controllers.AuthController.Register (Notes.Identity)'
2024-07-16 11:33:21.995 +03:00 [INF] Request finished HTTP/2 POST https://localhost:44325/Auth/Register - 302 null null 776.1901ms
2024-07-16 11:33:22.039 +03:00 [INF] Request starting HTTP/2 GET https://localhost:44325/connect/authorize/callback?client_id=notes-web-app&redirect_uri=http%3A%2F%2Flocalhost%3A3000%2Fsignin-oidc&response_type=code&scope=openid%20profile%20NotesWebAPI&state=ca3336c210d447539cfcfbb27103b8fe&code_challenge=F1vCZSJdBJtOKUGOGvcIBvYvb81B8op-WGrUMwBGfMo&code_challenge_method=S256 - null null
2024-07-16 11:33:22.044 +03:00 [INF] Invoking IdentityServer endpoint: Duende.IdentityServer.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2024-07-16 11:33:22.067 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AccessFailedCount", u."ConcurrencyStamp", u."Email", u."EmailConfirmed", u."FirstName", u."LastName", u."LockoutEnabled", u."LockoutEnd", u."NormalizedEmail", u."NormalizedUserName", u."PasswordHash", u."PhoneNumber", u."PhoneNumberConfirmed", u."SecurityStamp", u."TwoFactorEnabled", u."UserName"
FROM "Users" AS u
WHERE u."Id" = @__p_0
LIMIT 1
2024-07-16 11:33:22.147 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2024-07-16 11:33:22.151 +03:00 [INF] Request finished HTTP/2 GET https://localhost:44325/connect/authorize/callback?client_id=notes-web-app&redirect_uri=http%3A%2F%2Flocalhost%3A3000%2Fsignin-oidc&response_type=code&scope=openid%20profile%20NotesWebAPI&state=ca3336c210d447539cfcfbb27103b8fe&code_challenge=F1vCZSJdBJtOKUGOGvcIBvYvb81B8op-WGrUMwBGfMo&code_challenge_method=S256 - 302 null null 112.5213ms
2024-07-16 11:33:22.770 +03:00 [INF] Request starting HTTP/2 GET https://localhost:44325/.well-known/openid-configuration - null null
2024-07-16 11:33:22.772 +03:00 [INF] CORS policy execution successful.
2024-07-16 11:33:22.775 +03:00 [INF] Invoking IdentityServer endpoint: Duende.IdentityServer.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2024-07-16 11:33:22.778 +03:00 [INF] Request finished HTTP/2 GET https://localhost:44325/.well-known/openid-configuration - 200 null application/json; charset=UTF-8 7.8947ms
2024-07-16 11:33:22.782 +03:00 [INF] Request starting HTTP/2 GET https://localhost:44325/.well-known/openid-configuration - null null
2024-07-16 11:33:22.783 +03:00 [INF] CORS policy execution successful.
2024-07-16 11:33:22.786 +03:00 [INF] Invoking IdentityServer endpoint: Duende.IdentityServer.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2024-07-16 11:33:22.787 +03:00 [INF] Request finished HTTP/2 GET https://localhost:44325/.well-known/openid-configuration - 200 null application/json; charset=UTF-8 5.5259ms
2024-07-16 11:33:22.872 +03:00 [INF] Request starting HTTP/2 POST https://localhost:44325/connect/token - application/x-www-form-urlencoded 293
2024-07-16 11:33:22.872 +03:00 [INF] Request starting HTTP/2 POST https://localhost:44325/connect/token - application/x-www-form-urlencoded 293
2024-07-16 11:33:22.872 +03:00 [INF] CORS policy execution successful.
2024-07-16 11:33:22.872 +03:00 [INF] CORS policy execution successful.
2024-07-16 11:33:22.878 +03:00 [INF] Invoking IdentityServer endpoint: Duende.IdentityServer.Endpoints.TokenEndpoint for /connect/token
2024-07-16 11:33:22.879 +03:00 [INF] Invoking IdentityServer endpoint: Duende.IdentityServer.Endpoints.TokenEndpoint for /connect/token
2024-07-16 11:33:22.940 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AccessFailedCount", u."ConcurrencyStamp", u."Email", u."EmailConfirmed", u."FirstName", u."LastName", u."LockoutEnabled", u."LockoutEnd", u."NormalizedEmail", u."NormalizedUserName", u."PasswordHash", u."PhoneNumber", u."PhoneNumberConfirmed", u."SecurityStamp", u."TwoFactorEnabled", u."UserName"
FROM "Users" AS u
WHERE u."Id" = @__p_0
LIMIT 1
2024-07-16 11:33:22.968 +03:00 [INF] Token request validation success, {"ClientId":"notes-web-app","ClientName":"Notes Web","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"****BD-1","RefreshToken":"********","UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"authorization_code","redirect_uri":"http://localhost:3000/signin-oidc","code":"***REDACTED***","code_verifier":"169eb71696c24c9cb72c04b65be196f21264c650baec43dca4fc323eac1854e618e23cf152454b408beb4d457657a536","client_id":"notes-web-app"},"$type":"TokenRequestValidationLog"}
2024-07-16 11:33:23.003 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."ClaimType", u."ClaimValue", u."UserId"
FROM "UserClaim" AS u
WHERE u."UserId" = @__user_Id_0
2024-07-16 11:33:23.009 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r."Name"
FROM "UserRoles" AS u
INNER JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."UserId" = @__userId_0
2024-07-16 11:33:23.015 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AccessFailedCount", u."ConcurrencyStamp", u."Email", u."EmailConfirmed", u."FirstName", u."LastName", u."LockoutEnabled", u."LockoutEnd", u."NormalizedEmail", u."NormalizedUserName", u."PasswordHash", u."PhoneNumber", u."PhoneNumberConfirmed", u."SecurityStamp", u."TwoFactorEnabled", u."UserName"
FROM "Users" AS u
WHERE u."Id" = @__p_0
LIMIT 1
2024-07-16 11:33:23.018 +03:00 [INF] Token request validation success, {"ClientId":"notes-web-app","ClientName":"Notes Web","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"****BD-1","RefreshToken":"********","UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"authorization_code","redirect_uri":"http://localhost:3000/signin-oidc","code":"***REDACTED***","code_verifier":"169eb71696c24c9cb72c04b65be196f21264c650baec43dca4fc323eac1854e618e23cf152454b408beb4d457657a536","client_id":"notes-web-app"},"$type":"TokenRequestValidationLog"}
2024-07-16 11:33:23.022 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."ClaimType", u."ClaimValue", u."UserId"
FROM "UserClaim" AS u
WHERE u."UserId" = @__user_Id_0
2024-07-16 11:33:23.031 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r."Name"
FROM "UserRoles" AS u
INNER JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."UserId" = @__userId_0
2024-07-16 11:33:23.127 +03:00 [INF] Request finished HTTP/2 POST https://localhost:44325/connect/token - 200 null application/json; charset=UTF-8 254.5181ms
2024-07-16 11:33:23.127 +03:00 [INF] Request finished HTTP/2 POST https://localhost:44325/connect/token - 200 null application/json; charset=UTF-8 254.6824ms
2024-07-16 11:33:23.370 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:44325/.well-known/openid-configuration - null null
2024-07-16 11:33:23.371 +03:00 [INF] Invoking IdentityServer endpoint: Duende.IdentityServer.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2024-07-16 11:33:23.373 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:44325/.well-known/openid-configuration - 200 null application/json; charset=UTF-8 4.5434ms
2024-07-16 11:33:23.399 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:44325/.well-known/openid-configuration/jwks - null null
2024-07-16 11:33:23.400 +03:00 [INF] Invoking IdentityServer endpoint: Duende.IdentityServer.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2024-07-16 11:33:23.414 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:44325/.well-known/openid-configuration/jwks - 200 null application/json; charset=UTF-8 15.4186ms
